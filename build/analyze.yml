steps:
- task: AntiMalware@3
  displayName: 'Run AntiMalware'
  inputs:
    InputType: 'Basic'
    ScanType: 'CustomScan'
    FileDirPath: '$(Build.SourcesDirectory)'
    EnableServices: true
    TreatSignatureUpdateFailureAs: 'Standard'
    SignatureFreshness: 'OneDay'
    TreatStaleSignatureAs: 'Error'

- task: Armory@2
  displayName: 'Scan Sample ARM Templates'
  inputs:
    targetDirectory: '$(Build.SourcesDirectory)\samples\templates'
    targetFiles: 'f|*.json'

- task: BinSkim@3
  inputs:
    InputType: 'Basic'
    Function: 'analyze'
    AnalyzeTarget: '$(Build.SourcesDirectory)\*\Microsoft.Health.Dicom*.dll;$(Build.SourcesDirectory)\*\Microsoft.Health.Dicom*.exe'

- task: CredScan@2
  displayName: 'Run CredScan'
  inputs:
    scanFolder: '$(Build.SourcesDirectory)'
    toolMajorVersion: 'V1'
    outputFormat: 'sarif'