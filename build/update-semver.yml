steps:
- task: UseDotNet@2
  displayName: 'Use .NET Core sdk (for GitVersion)'
  inputs:
    packageType: sdk
    version: 5.0.x

- task: gitversion/setup@0
  displayName: 'Install GitVersion'
  inputs:
    versionSpec: '5.x'
    
- task: gitversion/execute@0
  displayName: 'Gitversion-Execute'
  inputs:
    useConfigFile: true
    configFilePath: '$(Build.SourcesDirectory)/GitVersion.yml'

# Can set these: https://github.com/GitTools/actions/blob/master/gitversion/execute/action.yml
- powershell: |
    Write-Host "##vso[task.setvariable variable=semVer]$(GitVersion.SemVer)"
    Write-Host "##vso[task.setvariable variable=informationalVersion;isOutput=true]$(GitVersion.InformationalVersion)"
    Write-Host "##vso[task.setvariable variable=majorMinorPatch;isOutput=true]$(GitVersion.MajorMinorPatch)"
    Write-Host "##vso[task.setvariable variable=nuGetVersion;isOutput=true]$(GitVersion.NuGetVersion)"
    Write-Host "##vso[task.setvariable variable=assemblySemVer;isOutput=true]$(GitVersion.AssemblySemVer)"
    Write-Host "##vso[task.setvariable variable=assemblySemFileVer;isOutput=true]$(GitVersion.AssemblySemFileVer)"
  name: SetVariablesFromGitVersion

- powershell: |
    Write-Host '----------Variables to use for build----------'
    Write-Host 'semVer: $(semVer)'
    Write-Host 'informationalVersion: $(informationalVersion)'
    Write-Host 'majorMinorPatch: $(majorMinorPatch)'
    Write-Host 'assemblySemVer: $(assemblySemVer)'
    Write-Host 'assemblySemFileVer: $(assemblySemFileVer)'
    Write-Host 'nuGetVersion: $(nuGetVersion)'
  name: PrintVariablesFromGitVersion